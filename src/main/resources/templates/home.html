<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pet911</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS CDN -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>

<div class="container" style="margin-top: 100px;">
    <h1>Pet911</h1>
    <p>Welcome to Pet911, your go-to place for pet emergencies.</p>

    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Ask a Question</h5>
            <form id="questionForm">
                <div class="mb-3">
                    <label for="questionType" class="form-label">Select Question Type</label>
                    <select class="form-control" id="questionType" name="questionType">
                        <option value="emergency">Emergency</option>
                        <option value="non-emergency">Non-Emergency</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="question" class="form-label">Enter your question</label>
                    <input type="text" class="form-control" id="question" name="question" placeholder="Describe your pet's symptoms...">
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
            <div id="response" class="mt-3"></div>
        </div>
    </div>
</div>

<!-- Bootstrap JS and dependencies CDN -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    $(document).ready(function() {
        $('#questionForm').on('submit', function(event) {
            event.preventDefault();
            const questionType = $('#questionType').val();
            const question = $('#question').val();
            let responseText = '';

            if (questionType === 'emergency') {
                // 병원으로 내용을 전달하는 로직 (실제 구현 필요)
                responseText = 'Your emergency has been reported to the nearest hospital. Please stay calm and follow the instructions until you reach the hospital.';
            } else {
                // 비응급 관련 로직
                responseText = handleNonEmergency(question);
            }

            $('#response').html('<strong>AI:</strong> ' + responseText);
        });

        function handleNonEmergency(question) {
            if (question.toLowerCase().includes('website')) {
                return 'You can visit our website for more information.';
            }
            if (question.toLowerCase().includes('pet')) {
                return 'You can add a new pet through the "Add Pet" section on our website.';
            }
            return 'Please visit our FAQ section for more information.';
        }
    });
</script>
</body>
</html>
